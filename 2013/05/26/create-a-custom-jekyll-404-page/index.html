<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="author" content="Seabook Chen"> <meta name="description" content="How to create a custom Jekyll 404 page for sites hosted on GitHub Pages, which can redirect to homepage automatically after a timeout using HTML meta tag."/> <meta name="keywords" content="seabookchen,jekyll,github"/> <title>Create a custom Jekyll 404 page - Seabook Chen</title> <link href='/assets/css/blog-style.css' rel="stylesheet" type="text/css"> <link href="/rss.xml" rel="alternate" title="Seabook Chen" type="application/rss+xml"> <!--[if IE]><script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/js/modernizr-2.0.6.min.js"><\/script>');</script><![endif]--> <!--[if !IE]>--> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/js/modernizr-2.6.2.min.js"><\/script>');</script> <!--<![endif]--> <script>if(!navigator.userAgent.match(/.*(Pingdom|PhantomJS|StatusCake).*/gi)){(function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-35211385-1","auto");ga("send","pageview")};</script> </head> <body> <!--[if IE]><p class="site-notice">You are using an outdated browser. Please <a href="http://browsehappy.com/" target="_blank">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--> <noscript> <p class="site-notice">This site requires JavaScript. Here are the instructions <a href="http://www.enable-javascript.com/" target="_blank">how to enable JavaScript in your web browser</a>.</p> </noscript> <div class="nav-wrapper"> <div class="nav-form"> <span class="overlay-header menu">Menu</span> <a class="btn-close">Close</a> <div class="results"> <a href="/archives">Archives</a> <a href="/categories">Categories</a> <a href="/tags">Tags</a> <a href="/">About</a> </div> </div> </div> <div class="search-wrapper"> <div class="search-form"> <input type="text" class="overlay-header search-field" placeholder="Search..."> <a class="btn-close">Close</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" data-ga="Menu"></button> <a href="/">Seabook Chen</a> <!--[if !IE]>--><button class="btn-search" data-ga="Search"></button><!--<![endif]--> </li> <li class="nav-link"><a data-ga="Archives" href="/archives">Archives</a></li> <li class="nav-link"><a data-ga="Categories" href="/categories">Categories</a></li> <li class="nav-link"><a data-ga="Tags" href="/tags">Tags</a></li> <!--[if !IE]>--><li class="nav-link"><a data-ga="Search" class="btn-search" href="#">Search</a></li><!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 itemprop="name" class="entry-title">Create a custom Jekyll 404 page</h1> </div> </div> </header> <div class="bd"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> Published: <time itemprop="datePublished" class="date-pub " title="2013-05-26T00:00:00+10:00" datetime="2013-05-26T00:00:00+10:00">May 26, 2013 </time> by <a class="author" href="/" rel="author"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Seabook Chen</span></span></a> <a class="license image-link" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/cc-by-sa.png" height="16" width="80"/> </a> (Last updated: <time class="date-updated updated" title="2014-03-18T00:00:00+11:00" datetime="2014-03-18T00:00:00+11:00">March 18, 2014</time>) </p> <ul class="list-category list-linear"> <li class="list-head">Categories: </li> <li> <a data-ga="articles" href="/categories/#articles" title="articles"> articles <span>16</span></a> </li> <li> <a data-ga="popular" href="/categories/#popular" title="popular"> popular <span>17</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">Tags: </li> <li> <a data-ga="github" href="/tags/#github" title="github">github <span>2</span></a> </li> <li> <a data-ga="jekyll" href="/tags/#jekyll" title="jekyll">jekyll <span>5</span></a> </li> </ul> </div> <div itemprop="articleBody"> <p>This article demonstrates how to create a custom Jekyll 404 page for Jekyll sites hosted on <a href="http://pages.github.com/">GitHub Page</a>.</p> <p>Things might be different if sites are hosted by other providers. Also it’s worth noting that custom 404 pages will only be functioning on custom domain sites. For more detailed GitHub Pages official documentation, please see <a href="https://help.github.com/articles/custom-404-pages">Custom 404 Pages - GitHub Help</a>.</p> <ul class="toc" id="markdown-toc"> <li><a href="#create-404-html-file">Create 404.html file</a></li> <li><a href="#add-yaml-front-matter">Add YAML Front Matter</a></li> <li><a href="#add-404-content">Add 404 content</a></li> <li><a href="#redirect-404-page-automatically">Redirect 404 page automatically</a></li> <li><a href="#test-404-page">Test 404 page</a></li> </ul> <h2 id="create-404-html-file">Create 404.html file</h2> <p>Create <code>404.html</code> in the root directory of Jekyll site, <del>which has to be an HTML file</del><sup><a id="footnote-ref-1" href="#footnote-1">[1]</a></sup>.</p> <h2 id="add-yaml-front-matter">Add YAML Front Matter</h2> <p>The goal here is to create a custom 404 page like all other pages using the same Jekyll theme, without creating a separately designed 404.html. Therefore, add <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a> section to the top of the 404.html and set the layout to be “page”.</p> <pre><code>---
layout: page
title: 404
---
</code></pre> <h2 id="add-404-content">Add 404 content</h2> <p>Add the actual 404 content after the <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a> section.</p> <pre><code>---
layout: page
title: 404
---
&lt;p&gt;Sorry this page does not exist =(&lt;/p&gt;
</code></pre> <h2 id="redirect-404-page-automatically">Redirect 404 page automatically</h2> <p>In order to redirect 404 page automatically, the easiest way might be using HTML meta tag, <code>meta http-equiv="refresh"</code>.</p> <ol> <li> <p>Add a <code>&lt;meta&gt;</code> tag in the <code>&lt;head&gt;</code> into Jekyll’s <code>default.html</code> (e.g. mine resides in /_includes/themes/THEME_NAME/default.html)<sup><a id="footnote-ref-2" href="#footnote-2">[2]</a></sup>.</p> </li> <li> <p>Set the meta tag’s <code>http-equiv</code> attribute to “refresh”, i.e <code>&lt;meta http-equiv="refresh"&gt;</code>.</p> </li> <li>Set meta tag’s content attribute to something similar to <code>content="5; url=/"</code>. <ul> <li><code>5</code> is the number of seconds to wait before automatically redirecting. Setting to <code>0</code> means immediate redirecting.</li> <li><code>url=/</code> sets the URL to be redirected to, which can also be set to any URLs like <code>url=http://yizeng.me</code> etc.</li> </ul> </li> <li>Use <a href="http://wiki.shopify.com/Liquid#If_.2F_Else_.2F_Unless">Liquid’s if-else</a> statement to ensure the auto-redirecting happens to <code>404.html</code> only. <script src="https://gist.github.com/yizeng/a4f26459bc8795476ed4.js"></script></li> </ol> <p>Here is a completed example of <code>default.html</code>: <script src="https://gist.github.com/yizeng/5428d29c3d5af224475b.js"></script></p> <h2 id="test-404-page">Test 404 page</h2> <ol> <li> <p>Build Jekyll server locally using <code>jekyll serve</code>, then go to URL <code>localhost:4000/404.html</code>, see if the custom 404 page works or not.</p> </li> <li> <p>Push to GitHub if everything looks fine.</p> </li> <li> <p>Go to the live site using the custom domain with a nonexistence URL, e.g. http://yizeng.me/go_404, see how the page looks and check if it can be redirected automatically or not.</p> </li> </ol> <div class="footnotes"><hr/><p id="footnote-1"> [1]: This statement no longer exists in official documentation, but I haven't had a chance to verify it. <a class="reverse-footnote internal" data-ga="Reverse Footnote" href="#footnote-ref-1" title="Back">↩</a> </p> <p id="footnote-2"> [2]: <a href="http://www.w3schools.com/tags/att_meta_http_equiv.asp">"HTML &lt;meta&gt; http-equiv Attribute" example</a> by W3schools. <a class="reverse-footnote internal" data-ga="Reverse Footnote" href="#footnote-ref-2" title="Back">↩</a> </p></div> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="gotop"> <a class="internal" href="#page">Back to Top</a> <div class="addthis_toolbox addthis_default_style addthis_32x32_style"> <a class="addthis_button_email"></a> <a class="addthis_button_facebook"></a> <a class="addthis_button_google_plusone_share"></a> <a class="addthis_button_reddit"></a> <a class="addthis_button_twitter"></a> </div> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid="></script> </div> <nav class="pagination"> <a class="internal" data-ga="Previous Post" rel="prev" href="/2013/05/19/use-_netrc-to-avoid-tortoisegit-asking-for-username-and-password" title="View 'Use netrc to avoid TortoiseGit asking for username and password'"> ← Use netrc to avoid TortoiseGit asking for username and password</a> <a class="internal" data-ga="Next Post" rel="next" href="/2013/06/15/setup-a-selenium-webdriver-ruby-project-on-travis-ci" title="View 'Setup a Selenium WebDriver Ruby project on Travis CI'">Setup a Selenium WebDriver Ruby project on Travis CI → </a> </nav> </div> </footer> <div class="misc-content"> <div class="comment"> <button class="center-block show-hidden" data-ga="Show Comments" data-disqus-url="http://seabookchen.net/2013/05/26/create-a-custom-jekyll-404-page/">Show Comments</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">About</a></h4> <p> <span class="fn p-name">Seabook Chen</span>, <span class="p-job-title">a software developer</span> <span> based in </span> <span class="adr h-adr p-adr"> <abbr class="locality p-locality">Melbourne</abbr>, <abbr class="country-name p-country-name">Australia</abbr>. </span> </p> <p><a href="" target="_blank">License</a> &amp; <a href="" target="_blank">Acknowledgements</a></p> </div> <div class="social-links"> <a class="ico-linkedin" href="https://au.linkedin.com/pub/seabook-chen/20/13/495" rel="me" target="_blank" title="LinkedIn Profile"></a> <a class="ico-github" href="http://github.com/seabookchen/" rel="me" target="_blank" title="GitHub Page"></a> <a class="ico-gmail" href="http://scr.im/30ax" rel="me" target="_blank" title="Email Address"></a> <a class="ico-twitter" href="https://twitter.com/IamSeabook" rel="me" target="_blank" title="Twitter Profile"></a> <a class="ico-rss" href="/rss.xml" rel="me" target="_blank" title="RSS Feeds"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">Back to Top</a> </footer> </div> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/js/jquery-1.11.0.min.js"><\/script>');</script> <!--[if !IE]>--> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/0.4.17/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/js/pace.min.js"><\/script>');</script> <!--<![endif]--> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top").click(function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false})});</script> <script>var sendGaEvent=function(b,c,a){if(a==="undefined"){ga("send","event",b,c)}else{ga("send","event",b,c,a.trim())}};$(document).ready(function(){$(".the-header .nav-link a").on("click",function(){label=(this.getAttribute("data-ga")!==null)?this.getAttribute("data-ga"):this.textContent;sendGaEvent("Internal Links","Click",label)});$(".the-header .nav-link button").on("click",function(){sendGaEvent("Navigation Buttons","Click",this.getAttribute("data-ga"))});$("[class$=wrapper] .results a").on("click",function(){sendGaEvent("Overlay Links","Click",this.textContent)});$(".the-footer .about a").on("click",function(){sendGaEvent("Footer Links","Click",this.textContent)});$(".the-footer .social-links > a").on("click",function(){sendGaEvent("Social Links","Click",this.title)});$(".tag_box.categories a").on("click",function(){sendGaEvent("Categories","Click",this.title)});$(".tag_box.tags a").on("click",function(){sendGaEvent("Tags","Click",this.title)});$("a.internal, .unit-article .comment .show-hidden").on("click",function(){label=(this.getAttribute("data-ga")!==null)?this.getAttribute("data-ga"):this.textContent;sendGaEvent("Internal Links","Click",label)});$(".unit-article .meta .author").on("click",function(){sendGaEvent("Post meta Links","Click","Author")});$(".unit-article .meta .license").on("click",function(){sendGaEvent("Post meta Links","Click","License")});$(".unit-article .meta .list-linear a").on("click",function(){if(this.getAttribute("data-ga")!==null){sendGaEvent("Post meta Links","Click",this.getAttribute("data-ga"))}})});</script> <script src="/assets/js/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>Search results</h4>",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src="/assets/js/google-code-prettify/run_prettify.js?lang=yaml"></script> <script>$("head").append('<link rel="stylesheet" href="/assets/css/highlight.css" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/js/google-code-prettify/prettify.css" type="text/css" />');</script> <script>$(document).ready(function(){var b="KFzbWZl4jsWRpxveM8AZ7nFLFlOJHotx0Ih4jyIKrGi5L66K2opIcmThlG96rGpl";var c="seabookchen";var a="link:"+$(".comment .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"https://disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="Show Comments ("+d.response[0].posts+")";$(".comment .show-hidden").html(btnText)}}});$(".comment .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("http://"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comment/.test(location.hash)){$(".comment .show-hidden").trigger("click")}});</script> </body> </html>